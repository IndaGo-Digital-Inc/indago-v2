import{r as h,o as w,c as e,f as c,l as n,t as x,F as a,j as f,b as t}from"./main-BrGFnIWw.js";const v={key:0,class:"text-center text-gray-500 py-10"},k={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md"},E={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},L={key:0,class:"h-48 w-full bg-gray-200"},M=["src","alt"],F={class:"p-6 flex flex-col flex-grow"},H=["innerHTML"],P={key:0,class:"mb-4 flex flex-wrap gap-2"},T=["innerHTML"],B={key:1,class:"mt-auto pt-4 border-t border-gray-200"},D=["src","alt"],I={class:"text-sm font-semibold text-gray-600"},V={__name:"Portfolio",setup(N){const g=h([]),y=h(!0),b=h(null);async function p(){try{const u=await fetch("/wp-json/wp/v2/projects?_embed");if(!u.ok)throw new Error("Failed to fetch projects.");let s=await u.json();const l=new Set;if(s.forEach(d=>{d._embedded&&d._embedded["wp:term"]&&d._embedded["wp:term"].forEach(o=>{o.forEach(i=>{i.taxonomy==="client"&&i.acf&&i.acf.client_logo&&l.add(i.acf.client_logo)})})}),l.size>0){const d=Array.from(l).map(r=>fetch(`/wp-json/wp/v2/media/${r}`).then(m=>m.ok?m.json():(console.error(`Failed to fetch media for ID: ${r}`),null))),o=await Promise.all(d),i=new Map;o.forEach(r=>{r&&r.source_url&&i.set(r.id,r.source_url)}),s=s.map(r=>(r._embedded&&r._embedded["wp:term"]&&r._embedded["wp:term"].forEach(m=>{m.forEach(_=>{_.taxonomy==="client"&&_.acf&&_.acf.client_logo&&(_.client_logo_url=i.get(_.acf.client_logo))})}),r))}g.value=s}catch(u){b.value=u.message}finally{y.value=!1}}return w(()=>{p()}),(u,s)=>(t(),e("div",null,[s[1]||(s[1]=c("h2",{class:"text-3xl font-bold mb-8 text-gray-800"},"Our Work",-1)),y.value?(t(),e("div",v,s[0]||(s[0]=[c("p",null,"Loading projects...",-1)]))):n("",!0),b.value?(t(),e("div",k,x(b.value),1)):n("",!0),g.value.length>0?(t(),e("div",E,[(t(!0),e(a,null,f(g.value,l=>(t(),e("article",{key:l.id,class:"bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300 hover:-translate-y-1"},[l._embedded&&l._embedded["wp:featuredmedia"]?(t(),e("div",L,[c("img",{src:l._embedded["wp:featuredmedia"][0].source_url,alt:l.title.rendered,class:"w-full h-full object-cover"},null,8,M)])):n("",!0),c("div",F,[c("h3",{class:"text-xl font-bold text-gray-900 mb-2",innerHTML:l.title.rendered},null,8,H),l._embedded&&l._embedded["wp:term"]?(t(),e("div",P,[(t(!0),e(a,null,f(l._embedded["wp:term"],d=>(t(),e(a,null,[(t(!0),e(a,null,f(d,o=>(t(),e(a,null,[o.taxonomy==="project_category"?(t(),e("span",{key:o.id,class:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full"},x(o.name),1)):n("",!0)],64))),256))],64))),256))])):n("",!0),c("div",{class:"text-gray-700 text-base mb-4 flex-grow",innerHTML:l.excerpt.rendered},null,8,T),l._embedded&&l._embedded["wp:term"]?(t(),e("div",B,[(t(!0),e(a,null,f(l._embedded["wp:term"],d=>(t(),e(a,null,[(t(!0),e(a,null,f(d,o=>(t(),e(a,null,[o.taxonomy==="client"?(t(),e("div",{key:o.id,class:"flex items-center"},[o.client_logo_url?(t(),e("img",{key:0,src:o.client_logo_url,alt:o.name+" Logo",class:"h-10 w-10 rounded-full object-contain mr-3 bg-gray-100 p-1"},null,8,D)):n("",!0),c("span",I,x(o.name),1)])):n("",!0)],64))),256))],64))),256))])):n("",!0)])]))),128))])):n("",!0)]))}};export{V as default};
